<div class="container">
  <app-navbar title="Ajouter un document"></app-navbar>
  <div class="row" style="margin-top: 30px">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-plus-circle fa-2x" aria-hidden="true"></i>
        </div>
        <div class="card-content">
          <h4 class="card-title">Ajouter un document -
            <small class="category">Compléter le formulaire</small>
          </h4>
          <form [formGroup]="myForm" novalidate (ngSubmit)="save(myForm)">
            <div class="row">
              <div class="col-md-3">

                <md-select placeholder="Type de document" formControlName="doc_type">
                    <md-option *ngFor="let type of _types" [value]="type.value">
                      {{ type.viewValue }}
                    </md-option>

                  </md-select>

              </div>
              <div class="col-md-6">
                <md-input-container color="accent">
                  <input mdInput type="text" placeholder="Nom du contact" value="George" formControlName="doc_contact">
                </md-input-container>
              </div>
              <div class="col-md-3">
                <md-input-container color="accent">
                  <input mdInput type="date" placeholder="Date du document" value="01-08-2017" formControlName="doc_date">
                </md-input-container>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <md-input-container color="accent">
                  <input mdInput type="text" placeholder="Addresse" formControlName="contact_address">
                </md-input-container>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <md-input-container color="accent">
                  <input mdInput type="text" placeholder="Code postale" formControlName="contact_codpost">
                </md-input-container>
              </div>
              <div class="col-md-4">
                <md-input-container color="accent">
                  <input mdInput type="text" placeholder="Pays" formControlName="contact_country">
                </md-input-container>
              </div>
              <div class="col-md-4">
                <md-input-container color="accent">
                  <input mdInput type="text" placeholder="Référence" formControlName="doc_reference">
                </md-input-container>
              </div>
            </div>
            <!--lines-->
            <div formArrayName="lines">
              <div *ngFor="let line of myForm.controls.lines.controls; let i=index" class="panel panel-default">
                <div class="panel-heading">
                  <span>Line {{i + 1}}</span>
                  <span class="glyphicon glyphicon-remove pull-right" *ngIf="myForm.controls.lines.controls.length > 1" (click)="removeLine(i)"></span>
                </div>
                <div class="panel-body" [formGroupName]="i">
                  <div class="form-group col-xs-6">
                    <label>Description</label>
                    <input type="text" class="form-control" formControlName="line_description">
                    <small [hidden]="myForm.controls.lines.controls[i].controls.line_description.valid" class="text-danger">
                      Description is required
                    </small>
                  </div>
                  <div class="form-group col-xs-6">
                    <label>Quantité</label>
                    <input type="number" class="form-control" formControlName="line_qtt">
                    <small [hidden]="myForm.controls.lines.controls[i].controls.line_qtt.valid" class="text-danger">
                      Quantité is required
                    </small>
                  </div>
                  <div class="form-group col-xs-6">
                    <label>Prix</label>
                    <input type="number" class="form-control" formControlName="line_price_unit">
                    <small [hidden]="myForm.controls.lines.controls[i].controls.line_price_unit.valid" class="text-danger">
                      Prix is required
                    </small>
                  </div>
                </div>
              </div>
            </div>

            <div class="margin-20">
              <a (click)="addLine()" style="cursor: default">
                Ajouter une autre ligne +
              </a>
            </div>

            <div class="margin-20">
              <button type="submit" class="btn btn-primary pull-right" [disabled]="!myForm.valid">Submit</button>
            </div>
            <div class="clearfix"></div>

            <div class="margin-20">
              <div>myForm details:-</div>
              <pre>Is myForm valid?: <br>{{myForm.valid | json}}</pre>
              <pre>form value: <br>{{myForm.value | json}}</pre>
            </div>



          </form>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card right-profile">
        <div class="profile">
          <img src="../../../assets/img/checklist.png" alt="profile"/>
        </div>
        <h6>TIPS</h6>
        <h4>{{ firstName }} {{ lastName }}</h4>
        <p>"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</p>
        <button md-raised-button class="btn btn-rose btn-round"><i class="fa fa-thumbs-o-up fa-3x" aria-hidden="true"></i></button>
      </div>
    </div>
  </div>
</div>
